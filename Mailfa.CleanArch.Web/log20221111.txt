2022-11-11 18:22:25.723 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:22:27.539 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:22:28.568 +03:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:22:28.689 +03:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:22:28.850 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:22:28.850 +03:30 [INF] Hosting environment: Development
2022-11-11 18:22:28.850 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:22:28.902 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:22:28.980 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:22:29.061 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 160.8427ms
2022-11-11 18:22:31.665 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26
2022-11-11 18:22:31.669 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26 - 404 - - 3.4973ms
2022-11-11 18:23:34.150 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:23:35.001 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:23:35.430 +03:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:23:35.491 +03:30 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:23:35.600 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:23:35.601 +03:30 [INF] Hosting environment: Development
2022-11-11 18:23:35.601 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:23:35.631 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26
2022-11-11 18:23:35.631 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:23:35.673 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:23:35.695 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:23:35.727 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:23:35.736 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 105.0780ms
2022-11-11 18:23:36.061 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:23:36.182 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:23:37.074 +03:30 [INF] Executed DbCommand (101ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:23:37.400 +03:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:23:37.527 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1461.2243ms.
2022-11-11 18:23:37.543 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:23:37.651 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 1916.7825ms
2022-11-11 18:23:37.653 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:23:37.665 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26 - 200 281 application/json;+charset=utf-8 2036.2306ms
2022-11-11 18:24:49.177 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:24:49.913 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:24:50.233 +03:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:24:50.279 +03:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:24:50.356 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:24:50.357 +03:30 [INF] Hosting environment: Development
2022-11-11 18:24:50.357 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:24:50.378 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:24:50.425 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:24:50.475 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 99.1844ms
2022-11-11 18:25:09.798 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26
2022-11-11 18:25:09.808 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:25:09.839 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:25:10.190 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:25:10.258 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:25:11.137 +03:30 [INF] Executed DbCommand (109ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:25:11.533 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:25:11.758 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:25:11.785 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1584.3718ms.
2022-11-11 18:25:11.803 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:25:11.918 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 2070.7403ms
2022-11-11 18:25:11.921 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:25:11.946 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26 - 200 281 application/json;+charset=utf-8 2147.3436ms
2022-11-11 18:25:34.496 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:25:35.289 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:25:35.631 +03:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:25:35.676 +03:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:25:35.754 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:25:35.754 +03:30 [INF] Hosting environment: Development
2022-11-11 18:25:35.754 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:25:35.771 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:25:35.812 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:25:35.864 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 94.6127ms
2022-11-11 18:25:42.211 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26
2022-11-11 18:25:42.220 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:25:42.243 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:25:42.433 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:25:42.522 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:25:42.976 +03:30 [INF] Executed DbCommand (53ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:25:43.176 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:25:57.978 +03:30 [INF] Executed DbCommand (22ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:26:07.948 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25512.3863ms.
2022-11-11 18:26:07.960 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:26:09.183 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 26936.5813ms
2022-11-11 18:26:09.184 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:26:09.198 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26 - 200 281 application/json;+charset=utf-8 26986.7945ms
2022-11-11 18:26:16.213 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 26
2022-11-11 18:26:16.215 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:26:16.215 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:26:16.228 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:26:16.263 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:26:16.267 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:26:16.272 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:26:36.094 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:29:10.097 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:29:10.891 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:29:11.260 +03:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:29:11.314 +03:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:29:11.412 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:29:11.412 +03:30 [INF] Hosting environment: Development
2022-11-11 18:29:11.412 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:29:11.434 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:29:11.481 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:29:11.540 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 108.0557ms
2022-11-11 18:29:12.541 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:29:12.549 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:29:12.580 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:29:12.866 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:29:12.924 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:29:13.692 +03:30 [INF] Executed DbCommand (100ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:29:13.812 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Byte' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at lambda_method516(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Byte' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at lambda_method516(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:29:13.930 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1057.5056ms.
2022-11-11 18:29:13.945 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:29:14.053 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 1466.1179ms
2022-11-11 18:29:14.055 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:29:14.075 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 183 application/json;+charset=utf-8 1534.3930ms
2022-11-11 18:29:34.425 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:29:34.432 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:29:34.432 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:29:34.444 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:29:46.976 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:29:46.982 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:29:46.982 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Byte' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at lambda_method516(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Byte' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at lambda_method516(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:29:47.009 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12565.1136ms.
2022-11-11 18:29:47.010 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:29:47.010 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 12578.3503ms
2022-11-11 18:29:47.011 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:29:47.011 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 183 application/json;+charset=utf-8 12586.8945ms
2022-11-11 18:30:04.157 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:30:04.157 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:30:04.157 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:30:04.167 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:30:22.366 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:30:22.371 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:30:22.372 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Byte' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at lambda_method516(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Byte' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at lambda_method516(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:30:28.093 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23924.9949ms.
2022-11-11 18:30:28.093 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:30:28.093 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 23935.9614ms
2022-11-11 18:30:28.093 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:30:28.094 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 183 application/json;+charset=utf-8 23936.7842ms
2022-11-11 18:30:30.817 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:30:30.818 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:30:30.818 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:30:30.831 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:31:00.464 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:31:01.274 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:31:01.616 +03:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:31:01.664 +03:30 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:31:01.743 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:31:01.743 +03:30 [INF] Hosting environment: Development
2022-11-11 18:31:01.743 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:31:01.764 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:31:01.809 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:31:01.864 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 100.9774ms
2022-11-11 18:31:06.747 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:31:06.756 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:31:06.793 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:31:07.078 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:31:11.351 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:31:12.108 +03:30 [INF] Executed DbCommand (91ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:31:12.392 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:31:21.401 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:31:21.441 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method568(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method568(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:31:34.507 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27423.1715ms.
2022-11-11 18:31:34.518 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:31:34.596 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 27798.7002ms
2022-11-11 18:31:34.597 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:31:34.610 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 186 application/json;+charset=utf-8 27863.3095ms
2022-11-11 18:31:37.615 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:31:37.617 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:31:37.617 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:31:37.629 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:31:41.124 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:31:41.128 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:31:46.533 +03:30 [INF] Executed DbCommand (13ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [WebMail_CheckRequest] SET [CR_Count] = @p0, [CR_ExpireDate] = @p1, [CR_IP] = @p2, [CR_Type] = @p3
WHERE [CR_ID] = @p4;
SELECT @@ROWCOUNT;
2022-11-11 18:33:00.057 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:33:00.058 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method568(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method568(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:33:01.160 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83530.625ms.
2022-11-11 18:33:01.160 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:33:01.161 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 83544.2203ms
2022-11-11 18:33:01.161 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:33:01.162 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 186 application/json;+charset=utf-8 83546.2263ms
2022-11-11 18:34:44.426 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:34:45.184 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:34:45.511 +03:30 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:34:45.561 +03:30 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:34:45.658 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:34:45.658 +03:30 [INF] Hosting environment: Development
2022-11-11 18:34:45.658 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:34:45.676 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:34:45.726 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:34:45.774 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 100.2778ms
2022-11-11 18:34:47.044 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:34:47.049 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:34:47.094 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:34:47.350 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:34:51.151 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:34:51.862 +03:30 [INF] Executed DbCommand (76ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:34:55.185 +03:30 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [WebMail_CheckRequest] SET [CR_Count] = @p0, [CR_ExpireDate] = @p1, [CR_IP] = @p2, [CR_Type] = @p3
WHERE [CR_ID] = @p4;
SELECT @@ROWCOUNT;
2022-11-11 18:35:04.149 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:35:09.894 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22538.1085ms.
2022-11-11 18:35:09.902 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:35:09.971 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 22871.2829ms
2022-11-11 18:35:09.972 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:35:09.985 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 118 application/json;+charset=utf-8 22941.2758ms
2022-11-11 18:35:45.563 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:35:46.401 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:35:46.748 +03:30 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:35:46.803 +03:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:35:46.879 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:35:46.880 +03:30 [INF] Hosting environment: Development
2022-11-11 18:35:46.880 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:35:46.900 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:35:46.944 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:35:46.996 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 97.6684ms
2022-11-11 18:35:49.192 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:35:49.204 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:35:49.245 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:35:49.561 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:35:49.599 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:35:50.449 +03:30 [INF] Executed DbCommand (105ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:35:54.332 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4766.5852ms.
2022-11-11 18:35:54.349 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:35:54.453 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 5200.7173ms
2022-11-11 18:35:54.457 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:35:54.473 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 118 application/json;+charset=utf-8 5281.9202ms
2022-11-11 18:35:57.977 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:35:57.979 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:35:57.979 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:35:57.994 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:35:58.029 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:35:58.037 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:35:58.039 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.1992ms.
2022-11-11 18:35:58.039 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:35:58.041 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 61.18ms
2022-11-11 18:35:58.041 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:35:58.041 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 118 application/json;+charset=utf-8 64.1694ms
2022-11-11 18:36:15.757 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:36:15.758 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:36:15.758 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:36:15.767 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:36:15.771 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:36:15.775 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:36:15.782 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.6981ms.
2022-11-11 18:36:15.782 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:36:15.783 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 25.1401ms
2022-11-11 18:36:15.783 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:36:15.783 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 118 application/json;+charset=utf-8 25.7588ms
2022-11-11 18:36:25.501 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:36:25.501 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:36:25.501 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:36:25.513 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:36:25.514 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:36:25.515 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:37:30.442 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:37:31.275 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:37:31.654 +03:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:37:31.711 +03:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:37:31.802 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:37:31.803 +03:30 [INF] Hosting environment: Development
2022-11-11 18:37:31.809 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:37:31.826 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:37:31.826 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:37:31.866 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:37:31.893 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:37:31.920 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:37:31.933 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 109.2472ms
2022-11-11 18:37:32.134 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:37:32.190 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:37:32.809 +03:30 [INF] Executed DbCommand (72ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:38:21.241 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:38:22.047 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:38:22.365 +03:30 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:38:22.419 +03:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:38:22.492 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:38:22.492 +03:30 [INF] Hosting environment: Development
2022-11-11 18:38:22.492 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:38:22.512 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:38:22.556 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:38:22.611 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 100.5804ms
2022-11-11 18:38:28.517 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:38:28.525 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:38:28.547 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:38:28.730 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:38:28.782 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:38:29.266 +03:30 [INF] Executed DbCommand (57ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:38:39.798 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11063.9803ms.
2022-11-11 18:38:39.809 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:38:39.872 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 11318.1562ms
2022-11-11 18:38:39.874 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:38:39.882 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 118 application/json;+charset=utf-8 11364.7057ms
2022-11-11 18:38:42.191 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:38:42.193 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:38:42.193 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:38:42.206 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:38:42.241 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:38:42.247 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:42:22.178 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:42:23.040 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:42:23.464 +03:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:42:23.525 +03:30 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:42:23.626 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:42:23.629 +03:30 [INF] Hosting environment: Development
2022-11-11 18:42:23.629 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:42:23.644 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:42:23.644 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:42:23.689 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:42:23.713 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:42:23.744 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:42:23.757 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 114.8662ms
2022-11-11 18:42:24.031 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:42:24.087 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:42:24.908 +03:30 [INF] Executed DbCommand (89ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:42:53.963 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:42:54.762 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:42:55.113 +03:30 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:42:55.152 +03:30 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:42:55.230 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:42:55.230 +03:30 [INF] Hosting environment: Development
2022-11-11 18:42:55.230 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:42:55.258 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:42:55.309 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:42:55.369 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 113.2609ms
2022-11-11 18:42:56.717 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:42:56.725 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:42:56.760 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:42:57.014 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:42:57.072 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:42:57.814 +03:30 [INF] Executed DbCommand (83ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:43:00.616 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3593.4213ms.
2022-11-11 18:43:00.631 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:43:00.719 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 3951.3123ms
2022-11-11 18:43:00.721 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:43:00.733 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 167 application/json;+charset=utf-8 4016.6500ms
2022-11-11 18:43:14.279 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:43:14.281 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:43:14.281 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:43:14.297 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:43:14.332 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:43:14.341 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:43:14.479 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:43:18.009 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:43:21.480 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7183.4265ms.
2022-11-11 18:43:21.481 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:43:21.481 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 7200.0781ms
2022-11-11 18:43:21.482 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:43:21.482 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 173 application/json;+charset=utf-8 7202.4755ms
2022-11-11 18:43:43.383 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:43:43.383 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:43:43.383 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:43:43.396 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:43:43.397 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:43:43.415 +03:30 [INF] Executed DbCommand (16ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:43:46.344 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [WebMail_CheckRequest] SET [CR_Count] = @p0, [CR_ExpireDate] = @p1, [CR_IP] = @p2, [CR_Type] = @p3
WHERE [CR_ID] = @p4;
SELECT @@ROWCOUNT;
2022-11-11 18:43:46.355 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:43:46.371 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userAccountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[User_Id], [w].[User_AccountID], [w].[User_Address], [w].[User_City], [w].[User_CountryID], [w].[User_ExpireDate], [w].[User_Fax], [w].[User_GroupID], [w].[User_Mobile], [w].[User_MobileConfirmed], [w].[User_OptionalEmail], [w].[User_PostalCode], [w].[User_Province], [w].[User_QuestionAnswer], [w].[User_QuestionID], [w].[User_RegisterDate], [w].[User_SignupIP], [w].[User_Telephone]
FROM [WebMail_Users] AS [w]
WHERE [w].[User_AccountID] = @__userAccountId_0
2022-11-11 18:43:46.373 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2976.5213ms.
2022-11-11 18:43:46.373 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:43:46.373 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 2989.942ms
2022-11-11 18:43:46.374 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:43:46.374 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 206 application/json;+charset=utf-8 2990.5307ms
2022-11-11 18:45:18.334 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:45:18.364 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:45:18.372 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:45:18.395 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:45:18.411 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:45:18.475 +03:30 [INF] Executed DbCommand (34ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:45:18.816 +03:30 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:45:18.822 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 426.3358ms.
2022-11-11 18:45:18.822 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:45:18.827 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 455.0596ms
2022-11-11 18:45:18.827 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:45:18.827 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 273 application/json;+charset=utf-8 493.4810ms
2022-11-11 18:45:52.728 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:45:52.729 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:45:52.729 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:45:52.742 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:45:52.750 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:45:52.756 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:45:52.797 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:45:52.827 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:45:52.845 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:45:52.846 +03:30 [ERR] An exception occurred in the database while saving changes for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-11-11 18:45:52.956 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 213.8016ms.
2022-11-11 18:45:52.956 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:45:52.957 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 227.9255ms
2022-11-11 18:45:52.957 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:45:52.957 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 428 application/json;+charset=utf-8 228.6455ms
2022-11-11 18:46:05.565 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:46:05.565 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:46:05.565 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:46:05.578 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:46:05.584 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:46:05.589 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:46:05.644 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:46:05.695 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 117.6377ms.
2022-11-11 18:46:05.696 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:46:05.696 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 130.8414ms
2022-11-11 18:46:05.696 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:46:05.696 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 273 application/json;+charset=utf-8 131.5443ms
2022-11-11 18:47:29.533 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:47:29.533 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:47:29.533 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:47:29.545 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:47:29.552 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:47:29.563 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:47:29.593 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:47:29.598 +03:30 [ERR] An exception occurred in the database while saving changes for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-11-11 18:47:29.655 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.9446ms.
2022-11-11 18:47:29.656 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:47:29.656 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 122.8261ms
2022-11-11 18:47:29.657 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:47:29.659 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:47:29.664 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:47:29.665 +03:30 [ERR] Connection ID "18230571313875910672", Request ID "40000017-0005-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalTransaction.Rollback()
   at Microsoft.Data.SqlClient.SqlTransaction.Dispose(Boolean disposing)
   at System.Data.Common.DbTransaction.DisposeAsync()
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.DisposeAsync()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ResetStateAsync(Boolean disposeDbConnection)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.<DisposeAsync>g__Await|22_0(Int32 i, ValueTask vt, List`1 toDispose)
   at Microsoft.EntityFrameworkCore.DbContext.DisposeAsync()
   at Autofac.Core.Disposer.DisposeAsync(Boolean disposing)
   at Autofac.Core.Lifetime.LifetimeScope.DisposeAsync(Boolean disposing)
   at Autofac.Extensions.DependencyInjection.AutofacServiceProvider.DisposeAsync()
   at Autofac.Extensions.DependencyInjection.AutofacServiceScope.DisposeAsync()
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.FireOnCompleted()
2022-11-11 18:47:29.746 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 428 application/json;+charset=utf-8 212.5966ms
2022-11-11 18:47:34.391 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:47:34.391 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:47:34.391 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:47:34.404 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:47:34.410 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:47:34.413 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:47:34.470 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:47:34.483 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.1621ms.
2022-11-11 18:47:34.483 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:47:34.484 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 92.8517ms
2022-11-11 18:47:34.484 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:47:34.484 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 273 application/json;+charset=utf-8 93.7558ms
2022-11-11 18:47:44.175 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:47:44.930 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:47:45.284 +03:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:47:45.337 +03:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:47:45.417 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:47:45.417 +03:30 [INF] Hosting environment: Development
2022-11-11 18:47:45.417 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:47:45.442 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:47:45.485 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:47:45.540 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 99.7720ms
2022-11-11 18:47:50.364 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:47:50.370 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:47:50.389 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:47:50.568 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:47:50.625 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:47:51.082 +03:30 [INF] Executed DbCommand (50ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:48:02.107 +03:30 [INF] Executed DbCommand (13ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:48:02.244 +03:30 [ERR] An exception occurred in the database while saving changes for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-11-11 18:48:02.315 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11743.0792ms.
2022-11-11 18:48:02.326 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:48:02.365 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:48:02.391 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 11997.5121ms
2022-11-11 18:48:02.392 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:48:02.409 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:48:02.413 +03:30 [ERR] Connection ID "18230571313875910681", Request ID "4000001a-0005-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalTransaction.Rollback()
   at Microsoft.Data.SqlClient.SqlTransaction.Dispose(Boolean disposing)
   at System.Data.Common.DbTransaction.DisposeAsync()
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.DisposeAsync()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ResetStateAsync(Boolean disposeDbConnection)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.<DisposeAsync>g__Await|22_0(Int32 i, ValueTask vt, List`1 toDispose)
   at Microsoft.EntityFrameworkCore.DbContext.DisposeAsync()
   at Autofac.Core.Disposer.DisposeAsync(Boolean disposing)
   at Autofac.Core.Lifetime.LifetimeScope.DisposeAsync(Boolean disposing)
   at Autofac.Extensions.DependencyInjection.AutofacServiceProvider.DisposeAsync()
   at Autofac.Extensions.DependencyInjection.AutofacServiceScope.DisposeAsync()
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.FireOnCompleted()
2022-11-11 18:48:02.417 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 428 application/json;+charset=utf-8 12053.4217ms
2022-11-11 18:48:45.164 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:48:45.165 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:48:45.166 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:48:45.178 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:48:45.233 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:48:45.241 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:49:13.109 +03:30 [INF] Executed DbCommand (22,783ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:49:46.960 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:49:47.744 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:49:48.124 +03:30 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:49:48.178 +03:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:49:48.264 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:49:48.264 +03:30 [INF] Hosting environment: Development
2022-11-11 18:49:48.264 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:49:48.288 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:49:48.334 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:49:48.385 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 100.3725ms
2022-11-11 18:49:50.724 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:49:50.731 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:49:50.762 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:49:51.017 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:49:51.107 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:49:51.888 +03:30 [INF] Executed DbCommand (74ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:49:53.790 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:49:54.781 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:49:56.056 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5030.6812ms.
2022-11-11 18:49:56.067 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:49:56.172 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 5400.8132ms
2022-11-11 18:49:56.173 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:49:56.187 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 221 application/json;+charset=utf-8 5462.4250ms
2022-11-11 18:52:35.833 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:52:36.633 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:52:36.965 +03:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:52:37.018 +03:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:52:37.110 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:52:37.110 +03:30 [INF] Hosting environment: Development
2022-11-11 18:52:37.110 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:52:37.127 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:52:37.177 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:52:37.231 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 105.4474ms
2022-11-11 18:52:42.376 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:52:42.387 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:52:42.431 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:52:42.752 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:52:42.843 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:52:43.768 +03:30 [INF] Executed DbCommand (111ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:52:45.773 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:52:46.959 +03:30 [INF] Executed DbCommand (8ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:52:47.891 +03:30 [ERR] Failed executing DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int64), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 1) (DbType = Byte), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int64), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 1) (DbType = Byte), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = Int64), @p24='?' (Size = 1) (DbType = Byte), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Folderid] int, [_Position] [int]);
MERGE [hm_imapfolders] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3)) AS i ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable])
VALUES (i.[Folderaccountid], i.[Foldercreationtime], i.[Foldercurrentuid], i.[Folderissubscribed], i.[Foldername], i.[Folderparentid], i.[Foldersmsenable])
OUTPUT INSERTED.[Folderid], i._Position
INTO @inserted0;

SELECT [i].[Folderid] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-11-11 18:52:47.932 +03:30 [ERR] An exception occurred in the database while saving changes for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Foldersmsenable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27ccff83-ba54-454e-b267-ef83e9d79063
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Foldersmsenable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27ccff83-ba54-454e-b267-ef83e9d79063
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-11-11 18:52:48.075 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5315.9467ms.
2022-11-11 18:52:48.087 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:52:48.193 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 5755.1894ms
2022-11-11 18:52:48.195 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:52:48.215 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 203 application/json;+charset=utf-8 5838.4685ms
2022-11-11 18:53:28.064 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:53:28.066 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:53:28.066 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:53:28.082 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:53:28.141 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:53:28.159 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:53:29.472 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:53:30.344 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:53:33.690 +03:30 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int64), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 1) (DbType = Byte), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int64), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 1) (DbType = Byte), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = Int64), @p24='?' (Size = 1) (DbType = Byte), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Folderid] int, [_Position] [int]);
MERGE [hm_imapfolders] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3)) AS i ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable])
VALUES (i.[Folderaccountid], i.[Foldercreationtime], i.[Foldercurrentuid], i.[Folderissubscribed], i.[Foldername], i.[Folderparentid], i.[Foldersmsenable])
OUTPUT INSERTED.[Folderid], i._Position
INTO @inserted0;

SELECT [i].[Folderid] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-11-11 18:53:33.692 +03:30 [ERR] An exception occurred in the database while saving changes for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Foldersmsenable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27ccff83-ba54-454e-b267-ef83e9d79063
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Foldersmsenable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27ccff83-ba54-454e-b267-ef83e9d79063
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-11-11 18:53:33.829 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5747.5857ms.
2022-11-11 18:53:33.830 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:53:33.831 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 5764.0652ms
2022-11-11 18:53:33.831 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:53:33.831 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 203 application/json;+charset=utf-8 5766.6931ms
2022-11-11 18:53:39.766 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:53:39.767 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:53:39.767 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:53:39.781 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:53:39.791 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:53:39.794 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:53:42.130 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:53:42.692 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:54:17.821 +03:30 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int64), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 1) (DbType = Byte), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int64), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 1) (DbType = Byte), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = Int64), @p24='?' (Size = 1) (DbType = Byte), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Folderid] int, [_Position] [int]);
MERGE [hm_imapfolders] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3)) AS i ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable])
VALUES (i.[Folderaccountid], i.[Foldercreationtime], i.[Foldercurrentuid], i.[Folderissubscribed], i.[Foldername], i.[Folderparentid], i.[Foldersmsenable])
OUTPUT INSERTED.[Folderid], i._Position
INTO @inserted0;

SELECT [i].[Folderid] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-11-11 18:54:17.823 +03:30 [ERR] An exception occurred in the database while saving changes for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Foldersmsenable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27ccff83-ba54-454e-b267-ef83e9d79063
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Foldersmsenable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27ccff83-ba54-454e-b267-ef83e9d79063
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-11-11 18:56:43.446 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 18:56:44.215 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:56:44.574 +03:30 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 18:56:44.631 +03:30 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 18:56:44.702 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 18:56:44.702 +03:30 [INF] Hosting environment: Development
2022-11-11 18:56:44.702 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 18:56:44.724 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 18:56:44.769 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 18:56:44.823 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 100.4923ms
2022-11-11 18:56:49.381 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126
2022-11-11 18:56:49.388 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:56:49.409 +03:30 [INF] Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.VerifyVerificationCodeInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:56:49.591 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:56:49.633 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:56:50.139 +03:30 [INF] Executed DbCommand (57ms) [Parameters=[@__domainId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Group_Id], [w].[Group_AdvertiseEnable], [w].[Group_Default], [w].[Group_Disk_Enable], [w].[Group_Disk_WebDiskSize], [w].[Group_DomainId], [w].[Group_Mail_AutoForwardEnable], [w].[Group_Mail_AutoReplyEnable], [w].[Group_Mail_DisableIMAP], [w].[Group_Mail_DisablePOP3], [w].[Group_Mail_DisableSMTP], [w].[Group_Mail_EnableLimits], [w].[Group_Mail_GroupSending], [w].[Group_Mail_MaxEmailPerDay], [w].[Group_Mail_MaxEmailPerHour], [w].[Group_Mail_MaxSize], [w].[Group_Mail_MaxSuspendPerEmail], [w].[Group_Mail_POP3AccountLimit], [w].[Group_Mail_ReceptionMaxLimit], [w].[Group_Membership_AdminApproval], [w].[Group_Membership_EmailApproval], [w].[Group_Membership_MobileApproval], [w].[Group_Membership_Price], [w].[Group_Membership_ValidateMonth], [w].[Group_Name], [w].[Group_SMS_EnglishPrice], [w].[Group_SMS_PersianPrice], [w].[Group_SMS_SignatureEnable], [w].[Group_Sms_Enable], [w].[Group_SpacialUser], [w].[Group_UpgradeEnable], [w].[Group_WapEnable]
FROM [WebMail_Groups] AS [w]
WHERE ([w].[Group_Default] = CAST(1 AS bit)) AND ([w].[Group_DomainId] = @__domainId_0)
2022-11-11 18:56:51.923 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__accountid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE [h].[accountid] = @__accountid_0
2022-11-11 18:56:57.829 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@p33='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (Size = 1) (DbType = Byte), @p13='?' (Size = 4000), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (Size = 1) (DbType = Byte), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (Size = 4000), @p31='?' (Size = 1) (DbType = Byte), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [hm_accounts] SET [Accountactive] = @p0, [Accountaddomain] = @p1, [Accountaddress] = @p2, [Accountadminlevel] = @p3, [Accountadusername] = @p4, [Accountblockendtime] = @p5, [Accountcountofmsg] = @p6, [Accountdisableimap] = @p7, [Accountdisablepop3] = @p8, [Accountdisablesmtp] = @p9, [Accountdomainid] = @p10, [Accountenablelimits] = @p11, [Accountenablesignature] = @p12, [Accountforwardaddress] = @p13, [Accountforwardenabled] = @p14, [Accountforwardkeeporiginal] = @p15, [Accountisad] = @p16, [Accountlastloginip] = @p17, [Accountlastlogontime] = @p18, [Accountlimittime] = @p19, [Accountmaxmsglimit] = @p20, [Accountmaxsize] = @p21, [Accountpassword] = @p22, [Accountpersonfirstname] = @p23, [Accountpersonlastname] = @p24, [Accountpwencryption] = @p25, [Accountsignaturehtml] = @p26, [Accountsignatureplaintext] = @p27, [Accountvacationexpiredate] = @p28, [Accountvacationexpires] = @p29, [Accountvacationmessage] = @p30, [Accountvacationmessageon] = @p31, [Accountvacationsubject] = @p32
WHERE [accountid] = @p33;
SELECT @@ROWCOUNT;
2022-11-11 18:56:59.982 +03:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int64), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 1) (DbType = Byte), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int64), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 1) (DbType = Byte), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = Int64), @p24='?' (Size = 1) (DbType = Byte), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Folderid] int, [_Position] [int]);
MERGE [hm_imapfolders] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3)) AS i ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Folderaccountid], [Foldercreationtime], [Foldercurrentuid], [Folderissubscribed], [Foldername], [Folderparentid], [Foldersmsenable])
VALUES (i.[Folderaccountid], i.[Foldercreationtime], i.[Foldercurrentuid], i.[Folderissubscribed], i.[Foldername], i.[Folderparentid], i.[Foldersmsenable])
OUTPUT INSERTED.[Folderid], i._Position
INTO @inserted0;

SELECT [i].[Folderid] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-11-11 18:57:04.512 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_Users] ([User_AccountID], [User_Address], [User_City], [User_CountryID], [User_ExpireDate], [User_Fax], [User_GroupID], [User_Mobile], [User_MobileConfirmed], [User_OptionalEmail], [User_PostalCode], [User_Province], [User_QuestionAnswer], [User_QuestionID], [User_RegisterDate], [User_SignupIP], [User_Telephone])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [User_Id]
FROM [WebMail_Users]
WHERE @@ROWCOUNT = 1 AND [User_Id] = scope_identity();
2022-11-11 18:57:04.525 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14927.1204ms.
2022-11-11 18:57:04.535 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.GetVerificationCodeOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:57:04.599 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web) in 15186.2477ms
2022-11-11 18:57:04.599 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.Signup (Mailfa.CleanArch.Web)'
2022-11-11 18:57:04.611 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/Signup application/json 126 - 200 273 application/json;+charset=utf-8 15229.4781ms
2022-11-11 18:57:14.298 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:57:14.299 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:57:14.303 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:57:14.317 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:57:14.359 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:57:14.365 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:57:14.377 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [WebMail_CheckRequest] SET [CR_Count] = @p0, [CR_ExpireDate] = @p1, [CR_IP] = @p2, [CR_Type] = @p3
WHERE [CR_ID] = @p4;
SELECT @@ROWCOUNT;
2022-11-11 18:57:14.396 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:57:14.397 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.8596ms.
2022-11-11 18:57:14.397 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:57:14.400 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 96.5838ms
2022-11-11 18:57:14.400 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:57:14.400 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 173 application/json;+charset=utf-8 102.2597ms
2022-11-11 18:57:34.107 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:57:34.107 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:57:34.107 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:57:34.120 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:57:34.122 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:57:34.128 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:57:34.129 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.8028ms.
2022-11-11 18:57:34.129 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:57:34.129 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 21.7756ms
2022-11-11 18:57:34.129 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:57:34.130 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 167 application/json;+charset=utf-8 22.5757ms
2022-11-11 18:57:48.645 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:57:48.646 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:57:48.646 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:57:48.657 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:57:48.660 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:57:48.661 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:57:48.664 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:57:48.681 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:57:48.689 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userAccountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[User_Id], [w].[User_AccountID], [w].[User_Address], [w].[User_City], [w].[User_CountryID], [w].[User_ExpireDate], [w].[User_Fax], [w].[User_GroupID], [w].[User_Mobile], [w].[User_MobileConfirmed], [w].[User_OptionalEmail], [w].[User_PostalCode], [w].[User_Province], [w].[User_QuestionAnswer], [w].[User_QuestionID], [w].[User_RegisterDate], [w].[User_SignupIP], [w].[User_Telephone]
FROM [WebMail_Users] AS [w]
WHERE [w].[User_AccountID] = @__userAccountId_0
2022-11-11 18:57:48.718 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method1285(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method1285(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:58:57.863 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69205.5771ms.
2022-11-11 18:58:57.863 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:58:57.870 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 69224.4374ms
2022-11-11 18:58:57.870 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:58:57.871 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 186 application/json;+charset=utf-8 69225.1131ms
2022-11-11 18:59:00.606 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:59:00.606 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:59:00.606 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:59:00.620 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:59:00.622 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:59:00.629 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:59:06.633 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [WebMail_CheckRequest] ([CR_Count], [CR_ExpireDate], [CR_IP], [CR_Type])
VALUES (@p0, @p1, @p2, @p3);
SELECT [CR_ID]
FROM [WebMail_CheckRequest]
WHERE @@ROWCOUNT = 1 AND [CR_ID] = scope_identity();
2022-11-11 18:59:06.647 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 18:59:16.242 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userAccountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[User_Id], [w].[User_AccountID], [w].[User_Address], [w].[User_City], [w].[User_CountryID], [w].[User_ExpireDate], [w].[User_Fax], [w].[User_GroupID], [w].[User_Mobile], [w].[User_MobileConfirmed], [w].[User_OptionalEmail], [w].[User_PostalCode], [w].[User_Province], [w].[User_QuestionAnswer], [w].[User_QuestionID], [w].[User_RegisterDate], [w].[User_SignupIP], [w].[User_Telephone]
FROM [WebMail_Users] AS [w]
WHERE [w].[User_AccountID] = @__userAccountId_0
2022-11-11 18:59:16.243 +03:30 [ERR] An exception occurred while iterating over the results of a query for context type 'Mailfa.CleanArch.Infrastructure.Data.AppDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method1285(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method1285(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-11-11 18:59:27.546 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26925.5411ms.
2022-11-11 18:59:27.549 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 18:59:27.550 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 26943.6189ms
2022-11-11 18:59:27.550 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:59:27.550 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 186 application/json;+charset=utf-8 26944.4788ms
2022-11-11 18:59:29.848 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 18:59:29.849 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 18:59:29.849 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 18:59:29.862 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 18:59:29.863 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 18:59:29.866 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 18:59:32.227 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [WebMail_CheckRequest] SET [CR_Count] = @p0, [CR_ExpireDate] = @p1, [CR_IP] = @p2, [CR_Type] = @p3
WHERE [CR_ID] = @p4;
SELECT @@ROWCOUNT;
2022-11-11 18:59:32.242 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 19:00:22.249 +03:30 [INF] User profile is available. Using 'C:\Users\mehdi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-11-11 19:00:23.005 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 19:00:23.376 +03:30 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-11-11 19:00:23.424 +03:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2022-11-11 19:00:23.501 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2022-11-11 19:00:23.501 +03:30 [INF] Hosting environment: Development
2022-11-11 19:00:23.501 +03:30 [INF] Content root path: D:\Web\mailfa\Mailfa.CleanArch\Mailfa.CleanArch.Web\
2022-11-11 19:00:23.526 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:57678/ - -
2022-11-11 19:00:23.572 +03:30 [WRN] Failed to determine the https port for redirect.
2022-11-11 19:00:23.624 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:57678/ - - - 404 - - 99.6674ms
2022-11-11 19:00:25.191 +03:30 [INF] Request starting HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27
2022-11-11 19:00:25.199 +03:30 [INF] Executing endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 19:00:25.224 +03:30 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordInput) on controller Mailfa.CleanArch.Controllers.UserController (Mailfa.CleanArch.Web).
2022-11-11 19:00:25.402 +03:30 [INF] Executing action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) - Validation state: "Valid"
2022-11-11 19:00:25.458 +03:30 [INF] Entity Framework Core 6.0.10 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None
2022-11-11 19:00:25.925 +03:30 [INF] Executed DbCommand (55ms) [Parameters=[@__ip_0='?' (Size = 4000), @__requestTypes_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[CR_ID], [w].[CR_Count], [w].[CR_ExpireDate], [w].[CR_IP], [w].[CR_Type]
FROM [WebMail_CheckRequest] AS [w]
WHERE ([w].[CR_IP] = @__ip_0) AND ([w].[CR_Type] = @__requestTypes_1)
2022-11-11 19:00:29.346 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 1) (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [WebMail_CheckRequest] SET [CR_Count] = @p0, [CR_ExpireDate] = @p1, [CR_IP] = @p2, [CR_Type] = @p3
WHERE [CR_ID] = @p4;
SELECT @@ROWCOUNT;
2022-11-11 19:00:29.433 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__accountDomainId_0='?' (DbType = Int32), @__emailAddress_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[accountid], [h].[Accountactive], [h].[Accountaddomain], [h].[Accountaddress], [h].[Accountadminlevel], [h].[Accountadusername], [h].[Accountblockendtime], [h].[Accountcountofmsg], [h].[Accountdisableimap], [h].[Accountdisablepop3], [h].[Accountdisablesmtp], [h].[Accountdomainid], [h].[Accountenablelimits], [h].[Accountenablesignature], [h].[Accountforwardaddress], [h].[Accountforwardenabled], [h].[Accountforwardkeeporiginal], [h].[Accountisad], [h].[Accountlastloginip], [h].[Accountlastlogontime], [h].[Accountlimittime], [h].[Accountmaxmsglimit], [h].[Accountmaxsize], [h].[Accountpassword], [h].[Accountpersonfirstname], [h].[Accountpersonlastname], [h].[Accountpwencryption], [h].[Accountsignaturehtml], [h].[Accountsignatureplaintext], [h].[Accountvacationexpiredate], [h].[Accountvacationexpires], [h].[Accountvacationmessage], [h].[Accountvacationmessageon], [h].[Accountvacationsubject]
FROM [hm_accounts] AS [h]
WHERE ([h].[Accountdomainid] = @__accountDomainId_0) AND ([h].[Accountaddress] = @__emailAddress_1)
2022-11-11 19:00:32.674 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userAccountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[User_Id], [w].[User_AccountID], [w].[User_Address], [w].[User_City], [w].[User_CountryID], [w].[User_ExpireDate], [w].[User_Fax], [w].[User_GroupID], [w].[User_Mobile], [w].[User_MobileConfirmed], [w].[User_OptionalEmail], [w].[User_PostalCode], [w].[User_Province], [w].[User_QuestionAnswer], [w].[User_QuestionID], [w].[User_RegisterDate], [w].[User_SignupIP], [w].[User_Telephone]
FROM [WebMail_Users] AS [w]
WHERE [w].[User_AccountID] = @__userAccountId_0
2022-11-11 19:00:39.679 +03:30 [INF] Executed action method Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14271.9902ms.
2022-11-11 19:00:39.691 +03:30 [INF] Executing OkObjectResult, writing value of type 'Ardalis.Result.Result`1[[Mailfa.CleanArch.Core.ProjectAggregate.ViewModel.ForgotPasswordOutput, Mailfa.CleanArch.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-11 19:00:39.759 +03:30 [INF] Executed action Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web) in 14531.1269ms
2022-11-11 19:00:39.760 +03:30 [INF] Executed endpoint 'Mailfa.CleanArch.Controllers.UserController.ForgotPassword (Mailfa.CleanArch.Web)'
2022-11-11 19:00:39.772 +03:30 [INF] Request finished HTTP/1.1 POST http://localhost:57678/user/ForgotPassword application/json 27 - 200 287 application/json;+charset=utf-8 14580.5075ms
